<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Seu carrinho</title> <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/tJJZngmW/Favicon.png"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous"> <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.0/jquery.mask.js"></script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<meta property="og:title" content="Seu carrinho">
<meta property="og:description" content="Monte seu carrinho na VA Imports">
<meta property="og:image" content="https://i.postimg.cc/zBNCgKv6/Carrinho-VA.png">
<meta property="og:image:width" content="300">
<meta property="og:image:height" content="300">
<meta property="og:url" content="https://vaimports145.github.io/vaimports/carrinho.html">
<style>
/*---------------------------------------------------Principal--------------------------------------------------*/
	
body {padding-top: 115px; background-color: #E5D3C0; margin: 0; display: flex; flex-direction: column; min-height: 100vh;}
.fundo {background-color: #191919; position: fixed; width: 100%; top:0; text-align: center; z-index: 2;}
.logo {max-width: 150px;}
.cxdebusca {width: 100%; border-radius: 20px; height: 50px; font-weight: bold; background-color: white; margin-top: 15px;}
.inputmenu {float: left; width: 80%; padding: 15px; border-radius: 20px; height: 50px; font-weight: bold; border: none; background-color:transparent; color: #000;}
.inputmenu:focus {box-shadow: 0 0 0 0;}
.lupa {float: right; width: 30px; margin: 10px;}
.op {font-size: 15px; text-decoration:none; color: #ffffff; font-weight: bold;}
.op:hover {color: grey;}
.carrinho {width: 50px; margin-top:65px; text-align: left;}
.quanticar {position: absolute; margin-top: 22px; margin-left: -4%; font-size: 15px; font-weight: bold;}
select {background-color: transparent; border: none; color: #ffffff; font-size: 15px; font-weight: bold;}
select:hover {color: grey;}
.selected {color: grey;}
option {font-size: 20px; color: black;}
.menuicon {display: none;}
.sidenav {display: none;}
.propaganda {max-width: 200px; margin-right: -20px; margin-bottom: -1px;}

/*---------------------------------------------------Carrinho--------------------------------------------------*/
	
#mensagemCarrinhoVazio {margin-top: 30%; text-align: center; display: flex; justify-content: center; align-items: center; height: 100vh; /* Define a altura da div como 100% da altura da tela */}
.botaoconferir {background-color: #191919; border-radius: 20px; padding: 20px; color: white; margin-top: 300px}    
#txcarrinho {margin-top: 50px; margin-left:5%}
#divglobal {margin-left: 5%; margin-right: 5%; margin-bottom: 100px}
.divcarrinho {width: 70%; background-color: white; border-radius: 10px; float: left;}
.divcarrinho th, .divcarrinho td {padding: 8px;}
.divcarrinho th {}
.divcarrinho img {width: 40%; max-width: 100px; /* Tamanho máximo da imagem */ height: auto; vertical-align: top;}
.nome-preco {display: inline-block; width: 50%; margin-left: 5px}
.total-label {font-size: 14px}
.inputtotal {width: 73%; border: 0; font-size: 14px}
.quantity-wrapper {background-color: #dcdcdc; text-align: center; border-radius: 10px; width: 70%}
.inputquantidade {width: 40%; text-align: center; font-size: 14px; background-color: transparent; border: 0}
.inputquantidade:focus {outline: none;}
input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; appearance: none; margin: 0;}
.quantity-buttonmais {padding: 0 3px 3px 3px; background-color: transparent ; cursor: pointer; border: 0}
.quantity-buttonmenos {padding: 0 5px 3px 5px; background-color: transparent; cursor: pointer; border: 0}
.nomeInput {width: 100%; border: 0; font-size: 13px;}
.nomeInput:focus {outline: none;}
.preco-label {font-weight: bold;}
.precoInput {width: 70%; font-weight: bold; color: #191919; border: 0; font-size: 14px}
.precoInput:focus {outline: none;}
.tdremover {border-left: 1px solid grey;}
.removerProduto {color: white; padding: 8px; background-color: #191919; border-radius: 10px; font-size: 11px}
.thquantidade {width: 20%;}
.thtotal {width: 25%}
.thproduto {width: 55%}
.linhaproduto {border-top: 1px solid grey}
.inforcarrinho {width: 25%; float: right; background-color: white; border-radius: 10px; padding: 10px;}
.h4total {margin-bottom: 10px;float: left;}
#precoTotal {width: 50%; float: right; border: 0; font-size: 15px; font-weight: bold}
#cliente {width: 100%; border-radius: 10px; padding: 5px}
#enviar {width: 100%; background-color: #191919; margin-top: 20px; color: white; border-radius: 10px; padding: 10px; margin-bottom: 10px}

/*---------------------------------------------------Footer--------------------------------------------------*/
	
.footer1 {width: 100%; height: 50px; background-image: linear-gradient(to bottom, #dcdcdc, #191919);}
footer {background-color: #191919; color: white;}
.logofooter {width: 15%; margin: 5%;}
.pfooter {margin-left: 5%;}
.copy {text-align: center; margin-top: 50px; font-size: 12px;}

/*---------------------------------------------------Celular--------------------------------------------------*/
	
@media only screen and (max-width: 700px) {
  body {padding-top: 80px; background-color: #dcdcdc}
  .logo {max-width: 60px; margin: 20px;}
  .cxdebusca {height: 40px;}
  .inputmenu {width: 60%; height: 40px;}
  .lupa {width: 20px;}
  .op {display: none;}
  .carrinho {width: 40px; margin-top: 1px; margin: 20px;}
  .quanticar {margin-top: -11px; margin-left: -9%;}
  select {display: none;}
  .category {margin-left: 15px; color: white;}
  .category:hover {color: grey}
  .selected {color: grey;}
  option {font-size: 15px; color: black;}
  .menuicon {display: block; width: 40px; margin-left: 15px;}
  .sidenav {display: block; height: 100%; width: 0; position: fixed; z-index: 1; top: 0; left: 0; background-color: #191919; overflow-x: hidden; padding-top: 40px; transition: 0.5s; border-right: 1px solid white; text-align: left;}
  .sidenav a {text-decoration: none; font-size: 15px; color: white; display: block; transition: 0.2s;}
  .sidenav a:hover {color: grey;}
  .sidenav .closebtn {position: absolute; top: 0; right: 10px; font-size: 36px;}
  .propaganda {display: none;}
  #produtos {overflow-x: auto; -webkit-overflow-scrolling: touch; white-space: nowrap; margin-right: 0; margin-left: 0; padding-left: 5%;}
  .imagensproduto-principal {width: 100%; box-shadow: 0 0 0; margin: 0; border-radius: 0; padding: 30px}
  #imagemproduto {width: 100%; float: left;}
  .miniaturas {display: flex; flex-wrap: nowrap; margin-top: 15px;}
  .miniatura {margin-right: 10px}
  .inforproduto-principal {width: 100%; height: 100%; margin-top: 5px; box-shadow: 0 0 0; margin: 0; border-radius: 0; padding: 30px}
  .hrdescricao {float: left; width: 94%; display: block; border: 10px solid grey; margin-bottom: 40px}
  .descricao {width: 100%; height: 100%; box-shadow: 0 0 0; text-align: center; margin: 0; border-radius: 0; margin-top: 10px; margin-bottom: 50px}
  #txcarrinho {margin-top: 40px; margin-left:3%}
  #divglobal {width: 100%; margin: 0}
  .ths {display: none}
  .linhaproduto {border-top: 0; border-bottom: 1px solid #dcdcdc;}
  .divcarrinho img {margin-left: 5%;}
  .divcarrinho {width: 100%; margin-bottom: 10px; border-radius: 0; margin-top: 30px;}
  .celulaproduto {width: 60%;}
  .quantity-cell {width: 100%; display: block; margin-top: 10px;}
  .celulatotal {width: 100%; display: block; margin-top: -15px}
  .tdremover {width: 10%; border: 0; margin: 0; display: block; margin-top: -15px}
  .removerProduto {color: black; padding: 0; background-color: transparent; border-radius: 0; font-size: 11px;}
  .inforcarrinho {width: 100%; margin-bottom: 50px; border-radius: 0;}
  .tabletotal {width: 100%}
  #precoTotal {text-align: right; border: 0; font-size: 15px; font-weight: bold; margin-top: -12px}
  .cliente {float: left}
}
</style>
</head>
<body>
<header>
<table class="fundo">
<thead>
  
<!---------------Menu-------------->

<td><div id="mySidenav" class="sidenav" id="sidenav">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <div class="category" onclick="filterproducts('all')"><a href="#">Página Inicial</a></div>
      <hr><div class="category"><a href="https://api.whatsapp.com/send?phone=5593991755419">WhatsApp</a></div>
      <hr><div class="category"><a href="https://www.instagram.com/va_imports__/">Intagram</a></div>
      <hr><div class="ml-3 text-white"><h5>Categorias:</h5></div>
      <hr><div class="category" onclick="filterproducts('sons')" id="sons">Sons</div>
      <hr><div class="category" onclick="filterproducts('eletronicos')" id="eletronicos">Eletrônicos</div>
      <hr><div class="category" onclick="filterproducts('fones')" id="fones">Fones</div>
      <hr><div class="category" onclick="filterproducts('smartphones')" id="smartphones">Smartphones</div>
      <hr>
</div>
<span onclick="openNav()"><img class="menuicon" src="https://i.postimg.cc/1Rq9KB0N/menu.png" alt="menu"></span></td>
      
<!---------------Topo-------------->      
      
<td><img class="logo" src="https://i.postimg.cc/7hXhdRCS/Logo-5000-x-3000-px.png" alt="logo"></td>
<td>
	<div class="cxdebusca">
		<input class="form-control inputmenu" type="text" id="campopesquisa" placeholder="Buscar..." type="text">
		<img class="lupa" src="https://i.postimg.cc/QxXJxRyD/Lupa.png" alt="lupa" onclick="buscar()">
	</div>
	<nav class="navbar opcoes">
		<a class="op" href="https://api.whatsapp.com/send?phone=5593991755419">WhatsApp</a> 
		<a class="op" href="https://www.instagram.com/va_imports__/">Intagram</a>
		<select class="w-25" name="select" id="category" onchange="filterProducts()">
	            <option hidden value= 0 >Categorias</option>
	            <option value="tudo">Tudo</option>
	            <option value="sons">Sons</option>
	            <option value="eletronicos">Eletrônicos</option>
	            <option value="fones">Fones</option>
	            <option value="smartphones">Smartphones</option>
		</select>
	</nav>
</td>           
<td><a href="#"><img class="carrinho" src="https://i.postimg.cc/zBNCgKv6/Carrinho-VA.png" alt="carrinho"></a></td>     
<td><h1 class="quanticar">0</h1></td>

<!---------------Propaganda-------------->   

<td class="propaganda" style="padding: 15px"><!--<h1 style="color: white">SELFIE <br> CELULARES</h1>--></td>
</thead>
</table>
</header>

<!---------------Carrinho vazio-------------->
	
<div id="mensagemCarrinhoVazio" style="display: none;">
	<h2>Seu carrinho está vazio</h2><br>
    	<a href="produtos.html"><span class="botaoconferir">Confira nossos produtos</span></a>
</div>
	
<!---------------Carrinho-------------->
	
<h3 id="txcarrinho">Meu Carrinho</h3>
<div id="divglobal">
	<form action="https://api.sheetmonkey.io/form/uWEAGr6vo7kq8QBa6qsEsj" method="post">
  	<table class="divcarrinho">
    	<thead>
	  <tr class="ths">
	        <th class="thproduto">Produto</th>
	        <th class="thquantidade">Quantidade</th>
	        <th class="thtotal">Total</th>
	        <th class="thvazio">Total</th>
      	  </tr>
    	</thead>
    	<tbody>
      	<!-- Os produtos serão adicionados dinamicamente aqui -->
    	</tbody>
  	</table>

  	<div class="inforcarrinho">
  		<table class="tabletotal">
    			<th><h5 class="h4total">Total</h5></th>
    			<th><input type="text" name="A pagar" id="precoTotal" readonly></th>
  		</table>
    	<label class="cliente" for="Cliente">Nome Completo:</label>
    	<input type="text" id="cliente" name="Cliente" required>
        <label class="cliente" for="Contato">Número pra contato:</label>
    	<input type="text" id="cliente" name="Contato" required>

  	<input type="hidden" name="Created" value="x-sheetmonkey-current-date-time" />
  	<button type="submit" id="enviar" value="Submit">Enviar</button>
 	 </div>
	</form>
</div>

<!---------------Footer-------------->

<footer>
<div class="footer1"></div>
<img class="logofooter" src="https://i.postimg.cc/7hXhdRCS/Logo-5000-x-3000-px.png" alt="logo">
<div class="pfooter">
<p><b>Email:</b> vaimports145@gmail.com</p>
<p><b>WhatsApp:</b> (93) 99175-5419</p>
<p><b>Horário de atendiento:</b> Segunda à Sexta, das 8:00 as 18:00</p>
<p><b>Instagram:</b> @va_imports_</p>
<p class="copy">&copy; 2024 VA Imports. Todos os direitos reservados.</p>
</div>
</footer>

<!---------------Javascript-------------->
	
<script>
//__________Menu__________//

function openNav() {
 	document.getElementById("mySidenav").style.width = "50%";
 	var imagens = document.getElementById('slides');
}
function closeNav() {
	document.getElementById("mySidenav").style.width = "0";
 	var imagens = document.getElementById('slides');
}

//__________Buscar produtos__________//

document.getElementById('campopesquisa').addEventListener('keyup', function(event) {
	if (event.keyCode === 13) {
		buscar();
    }
});
    
function buscar() {
	var termoBusca = document.getElementById('campopesquisa').value.trim();
	if (termoBusca !== '') {
    	window.location.href = 'produtos.html?termo=' + encodeURIComponent(termoBusca);
  	}
}

//__________Buscar categorias__________//

function categorias() {
    var elementoCategoria = event.target.closest('.tudojunto').querySelector('.nomecategoria');
    var textoCategoria = elementoCategoria.innerText;
    window.location.href = 'produtos.html?termo=' + encodeURIComponent(textoCategoria);
}

//_____Função para calcular o total_____//
	
function calcularTotal() {
    var total = 0;
    var linhasProdutos = document.querySelectorAll('.linhaproduto');
    linhasProdutos.forEach(function(linha) {
        var precoUnitario = parseFloat(linha.querySelector('.precoInput').value);
        var quantidade = parseInt(linha.querySelector('.inputquantidade').value);
        total += precoUnitario * quantidade;
    });
    return total.toFixed(2);
}

//_____Função para atualizar o campo de entrada do total_____//
	
function atualizarCampoTotal() {
    var precoTotalInput = document.getElementById('precoTotal');
    precoTotalInput.value = "R$" + calcularTotal();
}

//_____Quando a página carregar_____//
	
window.onload = function() {
    var carrinhoTableBody = document.querySelector('.divcarrinho tbody');
    carrinhoTableBody.innerHTML = ''; // Limpa a tabela antes de exibir os produtos

    var listaProdutos = JSON.parse(localStorage.getItem('listaProdutos')) || [];

    // Atualizar a quantidade de produtos na lista
    document.querySelector('.quanticar').textContent = listaProdutos.length;

    // Verificar se há produtos na lista e exibir a mensagem se estiver vazia
    if (listaProdutos.length === 0) {
        document.getElementById('mensagemCarrinhoVazio').style.display = 'block';
        document.getElementById('divglobal').style.display = 'none';
        document.getElementById('txcarrinho').style.display = 'none';
    }

    // Selecionar a tabela do carrinho
    var carrinhoTableBody = document.querySelector('.divcarrinho tbody');

    // Percorrer a lista de produtos e adicionar cada produto ao carrinho
    listaProdutos.forEach(function(produto, index) {
        var newRow = document.createElement('tr');
        newRow.classList.add('linhaproduto');

        // Célula para a imagem, nome e preço
        var infoCell = document.createElement('td');
        infoCell.classList.add('celulaproduto');

        var img = document.createElement('img');
        img.src = produto.imagem;
        img.alt = "Imagem do Produto";
        infoCell.appendChild(img);

        var nomePrecoDiv = document.createElement('div');
        nomePrecoDiv.classList.add('nome-preco');

        var nomeInput = document.createElement('textarea');
        nomeInput.classList.add('nomeInput');
        nomeInput.name = 'Produto_' + index; // Adicionando o índice ao atributo name
        nomeInput.value = produto.nome;
        nomeInput.readOnly = true;
        nomePrecoDiv.appendChild(nomeInput);

        var precoLabel = document.createElement('span');
        precoLabel.classList.add('preco-label');
        precoLabel.textContent = 'R$';
        nomePrecoDiv.appendChild(precoLabel);

        var precoInput = document.createElement('input');
        precoInput.classList.add('precoInput');
        precoInput.name = 'Preco_' + index; // Adicionando o índice ao atributo name
        precoInput.type = "text";
        precoInput.value = produto.preco;
        precoInput.readOnly = true;
        nomePrecoDiv.appendChild(precoInput);

        infoCell.appendChild(nomePrecoDiv);

        newRow.appendChild(infoCell);

        // Célula para a quantidade
        var quantidadeCell = document.createElement('td');
        quantidadeCell.classList.add('quantity-cell');

        // Div para agrupar os botões e o input
        var quantidadeDiv = document.createElement('div');
        quantidadeDiv.classList.add('quantity-wrapper');

        // Botão de menos
        var menosButton = document.createElement('span');
        menosButton.textContent = '-';
        menosButton.classList.add('quantity-buttonmenos');
        menosButton.onclick = function() {
            var quantidadeInput = quantidadeDiv.querySelector('.inputquantidade');
            var newQuantity = Math.max(1, parseInt(quantidadeInput.value) - 1);
            quantidadeInput.value = newQuantity;
            produto.quantidade = newQuantity; // Atualiza a quantidade no objeto do produto
            localStorage.setItem('listaProdutos', JSON.stringify(listaProdutos)); // Salva no armazenamento local
            updateTotal();
        };

        // Input de quantidade
        var quantidadeInput = document.createElement('input');
        quantidadeInput.classList.add('inputquantidade');
        quantidadeInput.name = 'Quantidade_' + index; // Usar um identificador único para o produto
        quantidadeInput.type = "number";
        quantidadeInput.min = "1"; // Definindo o valor mínimo como 1
        quantidadeInput.value = produto.quantidade || 1; // Definindo a quantidade inicial como 1
        quantidadeInput.addEventListener('input', function() {
            produto.quantidade = parseInt(quantidadeInput.value); // Atualiza a quantidade no objeto do produto
            localStorage.setItem('listaProdutos', JSON.stringify(listaProdutos)); // Salva no armazenamento local
            atualizarCampoTotal();
        });

        // Botão de mais
        var maisButton = document.createElement('span');
        maisButton.textContent = '+';
        maisButton.classList.add('quantity-buttonmais');
        maisButton.onclick = function() {
            var quantidadeInput = quantidadeDiv.querySelector('.inputquantidade');
            var newQuantity = parseInt(quantidadeInput.value) + 1;
            quantidadeInput.value = newQuantity;
            produto.quantidade = newQuantity; // Atualiza a quantidade no objeto do produto
            localStorage.setItem('listaProdutos', JSON.stringify(listaProdutos)); // Salva no armazenamento local
            updateTotal();
        };

        // Adicionando os elementos à div de quantidade
        quantidadeDiv.appendChild(menosButton);
        quantidadeDiv.appendChild(quantidadeInput);
        quantidadeDiv.appendChild(maisButton);

        quantidadeCell.appendChild(quantidadeDiv);
        newRow.appendChild(quantidadeCell);

        // Função para atualizar o total
        function updateTotal() {
            var totalInput = newRow.querySelector('.inputtotal');
            var precoUnitario = parseFloat(precoInput.value);
            var quantidade = parseInt(quantidadeInput.value);
            totalInput.value = (precoUnitario * quantidade).toFixed(2); // Calcula o total
            atualizarCampoTotal(); // Atualiza o campo de total geral
        }

        // Célula para o total
        var totalCell = document.createElement('td');
        totalCell.classList.add('celulatotal');

        var totalLabel = document.createElement('span');
        totalLabel.classList.add('total-label');
        totalLabel.textContent = 'R$';
        totalCell.appendChild(totalLabel);

        var totalInput = document.createElement('input');
        totalInput.classList.add('inputtotal');
        totalInput.name = 'Total_' + index; // Adicionando o índice ao atributo name
        totalInput.type = "text";
        totalInput.readOnly = true;
        totalInput.value = (parseFloat(produto.preco) * parseFloat(quantidadeInput.value)).toFixed(2); // Calcula o total
        totalCell.appendChild(totalInput);
    	newRow.appendChild(totalCell);
    

    // Célula para o botão de remover
    var removerCell = document.createElement('td');
    removerCell.classList.add('tdremover');
    var removerLink = document.createElement('a');
    removerLink.href = "#";
    removerLink.textContent = 'Remover';
    removerLink.classList.add('removerProduto');
    removerLink.dataset.index = index; // Armazenar o índice do produto no link
    removerLink.onclick = removerProduto; // Associar a função de remoção ao clique
    removerCell.appendChild(removerLink);
    newRow.appendChild(removerCell);

    // Adicionar a nova linha à tabela do carrinho
    carrinhoTableBody.appendChild(newRow);

    // Atualizar o total
    updateTotal();
});

// Função para remover um produto do carrinho
function removerProduto() {
    // Obter o índice do produto a ser removido do atributo data-index do link
    var index = this.dataset.index;

    // Remover o produto da lista de produtos do armazenamento local
    var listaProdutos = JSON.parse(localStorage.getItem('listaProdutos')) || [];
    listaProdutos.splice(index, 1);
    localStorage.setItem('listaProdutos', JSON.stringify(listaProdutos));

    // Remover a linha do produto da tabela
    this.closest('tr').remove();

    // Atualizar a quantidade de produtos na lista
    document.querySelector('.quanticar').textContent = listaProdutos.length;

    // Verificar se há produtos na lista e exibir a mensagem se estiver vazia
    if (listaProdutos.length === 0) {
        document.getElementById('mensagemCarrinhoVazio').style.display = 'block';
        document.getElementById('divglobal').style.display = 'none';
        document.getElementById('txcarrinho').style.display = 'none';     
    } else {
        document.getElementById('mensagemCarrinhoVazio').style.display = 'none';
    }

    // Atualizar o total após a remoção
    atualizarCampoTotal();

    return false; // Para evitar a ação padrão do link
}

// Atualizar o total inicialmente ao carregar a página
atualizarCampoTotal();
};
function buscar() {
  var termoBusca = document.getElementById('campopesquisa').value.trim();
  if (termoBusca !== '') {
    // Redireciona para a página de destino com o termo de busca como parâmetro na URL
    window.location.href = 'produtos.html?termo=' + encodeURIComponent(termoBusca);
  }
}
</script>
</body>
</html>
